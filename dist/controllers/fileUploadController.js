const a10_0x821ee1=a10_0x414c;(function(_0x2033b5,_0x457821){const _0x3fffe3=a10_0x414c,_0x4585d6=_0x2033b5();while(!![]){try{const _0x76691a=-parseInt(_0x3fffe3(0x12f))/0x1*(parseInt(_0x3fffe3(0x12b))/0x2)+-parseInt(_0x3fffe3(0x13c))/0x3*(parseInt(_0x3fffe3(0x12e))/0x4)+parseInt(_0x3fffe3(0x13a))/0x5+parseInt(_0x3fffe3(0x132))/0x6*(-parseInt(_0x3fffe3(0x136))/0x7)+-parseInt(_0x3fffe3(0x154))/0x8*(-parseInt(_0x3fffe3(0x151))/0x9)+parseInt(_0x3fffe3(0x144))/0xa*(parseInt(_0x3fffe3(0x130))/0xb)+-parseInt(_0x3fffe3(0x143))/0xc*(-parseInt(_0x3fffe3(0x138))/0xd);if(_0x76691a===_0x457821)break;else _0x4585d6['push'](_0x4585d6['shift']());}catch(_0xaffc06){_0x4585d6['push'](_0x4585d6['shift']());}}}(a10_0x24ef,0x1a2a4));function a10_0x414c(_0x9bc64,_0x2af7c7){_0x9bc64=_0x9bc64-0x128;const _0x24ef64=a10_0x24ef();let _0x414cf=_0x24ef64[_0x9bc64];return _0x414cf;}function a10_0x24ef(){const _0x2a8ed2=['Profile\x20picture','Profile\x20picture\x20updated\x20successfully','1896144WQXgjk','10hEIZEO','file_type','pro_pic','Files\x20uploaded\x20successfully','message','join','file_url','json','status','File\x20not\x20found','user','files','save','270VIHdMb','originalname','No\x20new\x20file\x20uploaded','56128ZjpWoT','findById','params','Profile\x20picture\x20updated','push','unlinkSync','386366OGRUum','filename','file_category','8zxmzxz','1fHwHBA','284471gZJBSQ','exports','15714AWfOfH','path','existsSync','file_name','196SUuczf','document','13mwXEea','create','292480TjeMSf','file','118743agMVSc','body','mimetype','Internal\x20server\x20error','Error\x20updating\x20profile\x20picture:'];a10_0x24ef=function(){return _0x2a8ed2;};return a10_0x24ef();}const fileUploadModel=require('../model/fileUploadModel'),fs=require('fs'),path=require(a10_0x821ee1(0x133)),fileUploadControllerFun=async(_0x51ed28,_0x547c94)=>{const _0x2be716=a10_0x821ee1;try{const {remarks:_0x57ea38}=_0x51ed28[_0x2be716(0x13d)],_0x368de7=_0x51ed28[_0x2be716(0x14e)]['id'],_0x567548=[];if(_0x51ed28[_0x2be716(0x14f)]['files'])for(const _0x268fd3 of _0x51ed28[_0x2be716(0x14f)][_0x2be716(0x14f)]){const _0x529e03=await fileUploadModel[_0x2be716(0x139)]({'uploaded_by':_0x368de7,'original_name':_0x268fd3[_0x2be716(0x152)],'file_name':_0x268fd3[_0x2be716(0x12c)],'file_url':_0x268fd3[_0x2be716(0x133)],'file_type':_0x268fd3[_0x2be716(0x13e)],'remarks':_0x57ea38||null,'file_category':_0x2be716(0x137)});_0x567548[_0x2be716(0x129)](_0x529e03);}if(_0x51ed28[_0x2be716(0x14f)]['pro_pic']&&_0x51ed28['files'][_0x2be716(0x146)][0x0]){const _0x7e3604=_0x51ed28[_0x2be716(0x14f)][_0x2be716(0x146)][0x0],_0x480fdf=await fileUploadModel[_0x2be716(0x139)]({'uploaded_by':_0x368de7,'original_name':_0x7e3604['originalname'],'file_name':_0x7e3604[_0x2be716(0x12c)],'file_url':_0x7e3604[_0x2be716(0x133)],'file_type':_0x7e3604[_0x2be716(0x13e)],'remarks':_0x2be716(0x141),'file_category':'pro_pic'});_0x567548[_0x2be716(0x129)](_0x480fdf);}return _0x547c94[_0x2be716(0x14c)](0xc9)[_0x2be716(0x14b)]({'success':!![],'message':_0x2be716(0x147),'data':_0x567548});}catch(_0x54376e){return _0x547c94[_0x2be716(0x14c)](0x1f4)[_0x2be716(0x14b)]({'success':![],'message':'Internal\x20server\x20error','error':_0x54376e[_0x2be716(0x148)]});}},updateProPic=async(_0xd97c40,_0x351bb4)=>{const _0x2f3437=a10_0x821ee1;try{const _0x3add35=_0xd97c40[_0x2f3437(0x156)]['id'],_0xd66efc=_0xd97c40[_0x2f3437(0x14e)]['id'],_0x3abca5=await fileUploadModel[_0x2f3437(0x155)](_0x3add35);if(!_0x3abca5)return fs[_0x2f3437(0x12a)](_0xd97c40['file']['path']),_0x351bb4[_0x2f3437(0x14c)](0x194)[_0x2f3437(0x14b)]({'success':![],'message':_0x2f3437(0x14d)});if(!_0xd97c40[_0x2f3437(0x13b)])return fs[_0x2f3437(0x12a)](_0xd97c40[_0x2f3437(0x13b)][_0x2f3437(0x133)]),_0x351bb4[_0x2f3437(0x14c)](0x190)[_0x2f3437(0x14b)]({'success':![],'message':_0x2f3437(0x153)});const _0x18e10c=path[_0x2f3437(0x149)](__dirname,'..',_0x3abca5[_0x2f3437(0x14a)]);return _0x3abca5['original_name']=_0xd97c40[_0x2f3437(0x13b)][_0x2f3437(0x152)],_0x3abca5[_0x2f3437(0x135)]=_0xd97c40[_0x2f3437(0x13b)][_0x2f3437(0x12c)],_0x3abca5[_0x2f3437(0x14a)]=_0xd97c40['file'][_0x2f3437(0x133)],_0x3abca5[_0x2f3437(0x145)]=_0xd97c40['file'][_0x2f3437(0x13e)],_0x3abca5['uploaded_by']=_0xd66efc,_0x3abca5['remarks']=_0x2f3437(0x128),_0x3abca5[_0x2f3437(0x12d)]=_0x2f3437(0x146),await _0x3abca5[_0x2f3437(0x150)](),fs[_0x2f3437(0x134)](_0x18e10c)&&fs[_0x2f3437(0x12a)](_0x18e10c[_0x2f3437(0x14a)]),_0x351bb4['status'](0xc8)[_0x2f3437(0x14b)]({'success':!![],'message':_0x2f3437(0x142),'data':_0x3abca5});}catch(_0x394741){return _0xd97c40[_0x2f3437(0x13b)]&&_0xd97c40['file'][_0x2f3437(0x133)]&&fs[_0x2f3437(0x134)](_0xd97c40['file'][_0x2f3437(0x133)])&&fs[_0x2f3437(0x12a)](_0xd97c40['file'][_0x2f3437(0x133)]),console['error'](_0x2f3437(0x140),_0x394741),_0x351bb4[_0x2f3437(0x14c)](0x1f4)['json']({'success':![],'message':_0x2f3437(0x13f),'error':_0x394741[_0x2f3437(0x148)]});}};module[a10_0x821ee1(0x131)]={'fileUploadControllerFun':fileUploadControllerFun,'updateProPic':updateProPic};