const a16_0x36dac7=a16_0x251c;function a16_0x251c(_0x2653af,_0x16e475){_0x2653af=_0x2653af-0xbb;const _0x589cb8=a16_0x589c();let _0x251c95=_0x589cb8[_0x2653af];return _0x251c95;}(function(_0x4c172e,_0x2eb0a6){const _0x52c588=a16_0x251c,_0x5d53e0=_0x4c172e();while(!![]){try{const _0x78e63c=-parseInt(_0x52c588(0xd0))/0x1*(-parseInt(_0x52c588(0xe7))/0x2)+parseInt(_0x52c588(0xc9))/0x3*(-parseInt(_0x52c588(0xe9))/0x4)+parseInt(_0x52c588(0xcf))/0x5*(-parseInt(_0x52c588(0xc5))/0x6)+parseInt(_0x52c588(0x137))/0x7*(-parseInt(_0x52c588(0x13a))/0x8)+-parseInt(_0x52c588(0x10b))/0x9+-parseInt(_0x52c588(0x116))/0xa+parseInt(_0x52c588(0x130))/0xb;if(_0x78e63c===_0x2eb0a6)break;else _0x5d53e0['push'](_0x5d53e0['shift']());}catch(_0x2f8de4){_0x5d53e0['push'](_0x5d53e0['shift']());}}}(a16_0x589c,0x80679));const InmateSchema=require('../model/studentModel'),mongoose=require(a16_0x36dac7(0xf0)),logAudit=require('../utils/auditlogger'),Inmate=require('../model/studentModel'),bcrypt=require(a16_0x36dac7(0xfe)),fs=require('fs'),path=require('path'),moment=require(a16_0x36dac7(0x15b)),{Parser}=require(a16_0x36dac7(0x11d)),formatDateToYYYYMMDD=require(a16_0x36dac7(0xd3)),financialModel=require(a16_0x36dac7(0xc8)),userModel=require(a16_0x36dac7(0x165)),InmateLocation=require(a16_0x36dac7(0x127)),POSShoppingCart=require(a16_0x36dac7(0xcc)),{faceRecognitionService,faceRecognitionExcludeUserService}=require('../service/faceRecognitionService'),studentModel=require(a16_0x36dac7(0x133)),classModel=require(a16_0x36dac7(0x13c)),studentLocation=require(a16_0x36dac7(0x127)),fileUploadModel=require(a16_0x36dac7(0x158)),downloadInmatesCSV1=async(_0x1f1726,_0x576062)=>{const _0x12dfd1=a16_0x36dac7;try{const _0x23998b=await Inmate['find']()[_0x12dfd1(0x111)]();if(!_0x23998b||_0x23998b[_0x12dfd1(0x15f)]===0x0)return _0x576062[_0x12dfd1(0xfc)](0x194)['json']({'message':'No\x20inmates\x20found\x20to\x20export'});const _0x116af7=['inmateId','firstName','lastName',_0x12dfd1(0x164),_0x12dfd1(0x143),_0x12dfd1(0xf7),_0x12dfd1(0x10a),_0x12dfd1(0xce),'status','location_id',_0x12dfd1(0xfb)],_0x441367=_0x23998b[_0x12dfd1(0x167)](_0x1e05ae=>({..._0x1e05ae,'dateOfBirth':formatDateToYYYYMMDD(_0x1e05ae['dateOfBirth']),'admissionDate':formatDateToYYYYMMDD(_0x1e05ae[_0x12dfd1(0x10a)])})),_0x5280cd=new Parser({'fields':_0x116af7}),_0x51a842=_0x5280cd[_0x12dfd1(0x135)](_0x441367);_0x576062[_0x12dfd1(0x10c)](_0x12dfd1(0x168),_0x12dfd1(0x104)),_0x576062[_0x12dfd1(0x10c)](_0x12dfd1(0xc6),_0x12dfd1(0x14d)),_0x576062[_0x12dfd1(0xfc)](0xc8)[_0x12dfd1(0x15c)](_0x51a842);}catch(_0x43ea47){_0x576062[_0x12dfd1(0xfc)](0x1f4)[_0x12dfd1(0x153)]({'message':_0x12dfd1(0x11e),'error':_0x43ea47[_0x12dfd1(0xc2)]});}},downloadInmatesCSV=async(_0x193a9f,_0x301331)=>{const _0x5b8fa8=a16_0x36dac7;try{const _0x3b3f5a=await Inmate[_0x5b8fa8(0x13b)]()[_0x5b8fa8(0x111)]();if(!_0x3b3f5a||_0x3b3f5a[_0x5b8fa8(0x15f)]===0x0)return _0x301331[_0x5b8fa8(0xfc)](0x194)[_0x5b8fa8(0x153)]({'message':'No\x20inmates\x20found\x20to\x20export'});const _0x484805=[_0x5b8fa8(0x136),_0x5b8fa8(0x100),_0x5b8fa8(0xd2),_0x5b8fa8(0x164),'balance',_0x5b8fa8(0xf7),_0x5b8fa8(0x10a),'crimeType',_0x5b8fa8(0xfc),_0x5b8fa8(0x119),_0x5b8fa8(0xfb)],_0x18a884=_0x3b3f5a[_0x5b8fa8(0x167)](_0x43815b=>({..._0x43815b,'dateOfBirth':formatDateToYYYYMMDD(_0x43815b[_0x5b8fa8(0xf7)]),'admissionDate':formatDateToYYYYMMDD(_0x43815b[_0x5b8fa8(0x10a)])})),_0x2103fc=new Parser({'fields':_0x484805}),_0x51431c=_0x2103fc[_0x5b8fa8(0x135)](_0x18a884);_0x301331[_0x5b8fa8(0x10c)]('Content-Disposition',_0x5b8fa8(0xf6)),_0x301331['setHeader'](_0x5b8fa8(0xc6),_0x5b8fa8(0x14d)),_0x301331['status'](0xc8)['send'](_0x51431c);}catch(_0x522ce4){_0x301331[_0x5b8fa8(0xfc)](0x1f4)[_0x5b8fa8(0x153)]({'message':_0x5b8fa8(0x11e),'error':_0x522ce4[_0x5b8fa8(0xc2)]});}},downloadStudentsCSV=async(_0x49014c,_0x2c5eab)=>{const _0x781eb2=a16_0x36dac7;try{const _0x338d4e=await studentModel[_0x781eb2(0x13b)]()['populate'](_0x781eb2(0xef))[_0x781eb2(0x111)]();if(!_0x338d4e||_0x338d4e[_0x781eb2(0x15f)]===0x0)return _0x2c5eab[_0x781eb2(0xfc)](0x194)[_0x781eb2(0x153)]({'message':'No\x20students\x20found\x20to\x20export'});const _0x39ac3c=[_0x781eb2(0xca),_0x781eb2(0xd4),_0x781eb2(0x148),_0x781eb2(0x142),'date_of_birth',_0x781eb2(0xcb),_0x781eb2(0x121),_0x781eb2(0xdb),_0x781eb2(0x11a),_0x781eb2(0xec),_0x781eb2(0x12a),_0x781eb2(0x134),_0x781eb2(0xff),'section',_0x781eb2(0xee),_0x781eb2(0x123)],_0x3d0d51=_0x338d4e[_0x781eb2(0x167)](_0x12da4a=>({'registration_number':_0x12da4a[_0x781eb2(0xca)],'student_name':_0x12da4a[_0x781eb2(0xd4)],'father_name':_0x12da4a[_0x781eb2(0x148)],'mother_name':_0x12da4a[_0x781eb2(0x142)],'date_of_birth':formatDateToYYYYMMDD(_0x12da4a[_0x781eb2(0x14a)]),'gender':_0x12da4a[_0x781eb2(0xcb)],'birth_place':_0x12da4a[_0x781eb2(0x121)]||'','nationality':_0x12da4a[_0x781eb2(0xdb)]||'','mother_tongue':_0x12da4a[_0x781eb2(0x11a)]||'','blood_group':_0x12da4a[_0x781eb2(0xec)]||'','religion':_0x12da4a[_0x781eb2(0x12a)]||'','deposite_amount':_0x12da4a[_0x781eb2(0x134)],'class_name':_0x12da4a[_0x781eb2(0xef)]?.['class_name']||'','section':_0x12da4a[_0x781eb2(0xef)]?.[_0x781eb2(0x12e)]||'','academic_year':_0x12da4a[_0x781eb2(0xef)]?.[_0x781eb2(0xee)]||'','contact_number':_0x12da4a[_0x781eb2(0x123)],'pro_pic':_0x12da4a[_0x781eb2(0xf9)]||'','location_id':_0x12da4a[_0x781eb2(0x119)]||''})),_0x553005=new Parser({'fields':_0x39ac3c}),_0x5458cf=_0x553005['parse'](_0x3d0d51);_0x2c5eab[_0x781eb2(0x10c)](_0x781eb2(0x168),_0x781eb2(0xda)),_0x2c5eab[_0x781eb2(0x10c)](_0x781eb2(0xc6),'text/csv'),_0x2c5eab[_0x781eb2(0xfc)](0xc8)[_0x781eb2(0xd7)](_0x5458cf);}catch(_0x372e26){console[_0x781eb2(0x131)](_0x781eb2(0x149),_0x372e26),_0x2c5eab['status'](0x1f4)['json']({'message':_0x781eb2(0x11e),'error':_0x372e26[_0x781eb2(0xc2)]});}},createStudent=async(_0xee60d6,_0x21d449)=>{const _0x4a8754=a16_0x36dac7;let _0x41217c=null,_0x335110=null;try{const {registration_number:_0x463b01,student_name:_0x5c9566,father_name:_0x5526ad,mother_name:_0x4a7490,date_of_birth:_0x4001b8,gender:_0x14fffb,birth_place:_0x11f533,nationality:_0x46672a,mother_tongue:_0x58b1a1,blood_group:_0x2feaf7,religion:_0x23a6e0,deposite_amount:_0x561747,class_info:_0x178f53,location_id:_0x1f1474,pro_pic:_0x51627d,contact_number:_0x48bb02,descriptor:_0x3ed43b}=_0xee60d6[_0x4a8754(0x159)],_0x22f18f=[];if(!_0x463b01)_0x22f18f[_0x4a8754(0x144)]('registration_number');if(!_0x561747&&_0x561747!==0x0)_0x22f18f[_0x4a8754(0x144)]('deposite_amount');if(!_0x48bb02)_0x22f18f[_0x4a8754(0x144)](_0x4a8754(0x123));if(!_0x5c9566)_0x22f18f[_0x4a8754(0x144)](_0x4a8754(0xd4));if(!_0x5526ad)_0x22f18f['push']('father_name');if(!_0x4a7490)_0x22f18f[_0x4a8754(0x144)](_0x4a8754(0x142));if(!_0x4001b8)_0x22f18f[_0x4a8754(0x144)](_0x4a8754(0x14a));if(!_0x14fffb)_0x22f18f[_0x4a8754(0x144)](_0x4a8754(0xcb));if(!_0x178f53)_0x22f18f[_0x4a8754(0x144)](_0x4a8754(0xef));if(!_0x1f1474)_0x22f18f[_0x4a8754(0x144)](_0x4a8754(0x119));if(_0x22f18f['length']>0x0)return _0x21d449[_0x4a8754(0xfc)](0x190)['json']({'success':![],'message':_0x4a8754(0xe5)+_0x22f18f['join'](',\x20')});const _0x5dbfa0=[_0x4a8754(0xd8),_0x4a8754(0x15d),_0x4a8754(0x106)];if(!_0x5dbfa0[_0x4a8754(0x12b)](_0x14fffb))return _0x21d449[_0x4a8754(0xfc)](0x190)[_0x4a8754(0x153)]({'success':![],'message':_0x4a8754(0x154)});const _0x4422c7=await studentModel['findOne']({'registration_number':_0x463b01});if(_0x4422c7)return _0x21d449[_0x4a8754(0xfc)](0x190)[_0x4a8754(0x153)]({'success':![],'message':_0x4a8754(0x126)});if(_0x3ed43b){const _0x1f2434=await userModel[_0x4a8754(0x110)]({'descriptor':_0x3ed43b});if(_0x1f2434)return _0x21d449[_0x4a8754(0xfc)](0x190)[_0x4a8754(0x153)]({'success':![],'message':_0x4a8754(0xe1)});}let _0x1b45fe=await classModel[_0x4a8754(0x110)]({'class_name':_0x178f53[_0x4a8754(0xff)],'section':_0x178f53[_0x4a8754(0x12e)],'academic_year':_0x178f53[_0x4a8754(0xee)]});!_0x1b45fe&&(_0x1b45fe=await classModel[_0x4a8754(0x122)](_0x178f53));const _0x4e4ff1=await studentLocation[_0x4a8754(0xd5)](_0x1f1474);if(!_0x4e4ff1)return _0x21d449[_0x4a8754(0xfc)](0x190)[_0x4a8754(0x153)]({'success':![],'message':_0x4a8754(0x161)});const _0x465c26=await bcrypt['hash'](_0x463b01,0xa);return _0x335110=await userModel[_0x4a8754(0x122)]({'username':_0x463b01,'fullname':_0x5c9566,'password':_0x465c26,'role':_0x4a8754(0x157),'location_id':_0x1f1474,'descriptor':_0x3ed43b||null}),_0x41217c=await studentModel['create']({'registration_number':_0x463b01,'student_name':_0x5c9566,'father_name':_0x5526ad,'mother_name':_0x4a7490,'date_of_birth':_0x4001b8,'gender':_0x14fffb,'birth_place':_0x11f533,'nationality':_0x46672a,'mother_tongue':_0x58b1a1,'blood_group':_0x2feaf7,'religion':_0x23a6e0,'deposite_amount':_0x561747,'class_info':_0x1b45fe[_0x4a8754(0x128)],'location_id':_0x1f1474,'contact_number':_0x48bb02,'pro_pic':_0x51627d||null,'user_id':_0x335110[_0x4a8754(0x128)]}),await logAudit({'userId':_0xee60d6[_0x4a8754(0xbc)]['id'],'username':_0xee60d6[_0x4a8754(0xbc)]['username'],'action':'CREATE','targetModel':_0x4a8754(0x169),'targetId':_0x41217c['_id'],'description':_0x4a8754(0xe2)+_0x463b01+_0x4a8754(0x120),'changes':{'student':_0x41217c[_0x4a8754(0xbf)](),'user':_0x335110['toObject']()}}),_0x21d449[_0x4a8754(0xfc)](0xc9)[_0x4a8754(0x153)]({'success':!![],'message':_0x4a8754(0x138),'student':_0x41217c,'user':_0x335110});}catch(_0x53be7f){if(_0x41217c)await studentModel[_0x4a8754(0xcd)](_0x41217c[_0x4a8754(0x128)]);if(_0x335110)await userModel[_0x4a8754(0xcd)](_0x335110['_id']);return console[_0x4a8754(0x131)]('❌\x20Error\x20creating\x20student\x20with\x20user:',_0x53be7f),_0x21d449[_0x4a8754(0xfc)](0x1f4)[_0x4a8754(0x153)]({'success':![],'message':'Internal\x20server\x20error','error':_0x53be7f['message']});}},getStudents=async(_0x45d789,_0x2046ce)=>{const _0x560a9b=a16_0x36dac7;try{const {page:page=0x1,limit:limit=0xa,sortField:sortField=_0x560a9b(0x108),sortOrder:_0x2daa19,totalRecords:_0x3a715e,student_name:_0x364f1b,registration_number:_0x34faec,gender:_0x9fd556,location_id:_0x477370,class_name:_0x4ec385,exactData:_0x448d88,search:_0x7bfed8}=_0x45d789[_0x560a9b(0x11c)],_0x4cb80d=_0x2daa19===_0x560a9b(0x13d)?0x1:-0x1,_0xed3535={};_0x364f1b&&(_0xed3535['student_name']={'$regex':_0x364f1b,'$options':'i'});_0x34faec&&(_0xed3535[_0x560a9b(0xca)]={'$regex':_0x34faec,'$options':'i'});_0x9fd556&&(_0xed3535['gender']=_0x9fd556);_0x477370&&(_0xed3535[_0x560a9b(0x119)]=_0x477370);_0x7bfed8&&(_0xed3535['$or']=[{'student_name':{'$regex':_0x7bfed8,'$options':'i'}},{'registration_number':{'$regex':_0x7bfed8,'$options':'i'}},{'class_name':{'$regex':_0x7bfed8,'$options':'i'}}]);_0x448d88&&(_0xed3535[_0x560a9b(0xc3)]={'$eq':[{'$toLower':_0x560a9b(0x14c)},_0x448d88['toLowerCase']()]});let _0x21857e=[];if(_0x4ec385){const _0x26c10f=await classModel['find']({'class_name':{'$regex':_0x4ec385,'$options':'i'}})['select'](_0x560a9b(0x128));if(_0x26c10f['length'])_0x21857e=_0x26c10f[_0x560a9b(0x167)](_0x16dd8c=>_0x16dd8c[_0x560a9b(0x128)]),_0xed3535[_0x560a9b(0xef)]={'$in':_0x21857e};else return _0x2046ce[_0x560a9b(0x153)]({'success':!![],'data':[],'currentPage':Number(page),'totalPages':0x0,'totalItems':0x0,'message':_0x560a9b(0x166)});}let _0x3006a4=studentModel['find'](_0xed3535)['populate'](_0x560a9b(0x119),_0x560a9b(0x105))['populate'](_0x560a9b(0xef),_0x560a9b(0x150))['populate'](_0x560a9b(0xf9),_0x560a9b(0x147))['sort']({[sortField]:_0x4cb80d});const _0x56aa83=Number(page),_0xd9e900=Number(limit);if(!_0x3a715e||_0x3a715e!==_0x560a9b(0xf5)){const _0x7fcecb=(_0x56aa83-0x1)*_0xd9e900;_0x3006a4=_0x3006a4[_0x560a9b(0x10f)](_0x7fcecb)[_0x560a9b(0x145)](_0xd9e900);}const [_0x192296,_0x44a9f5]=await Promise[_0x560a9b(0x11b)]([_0x3006a4,studentModel[_0x560a9b(0x12c)](_0xed3535)]);if(!_0x192296[_0x560a9b(0x15f)])return _0x2046ce[_0x560a9b(0xfc)](0xc8)[_0x560a9b(0x153)]({'success':!![],'message':_0x560a9b(0x114),'data':[]});const _0x1e19bb=_0x192296[_0x560a9b(0x167)](_0x50e76e=>({..._0x50e76e[_0x560a9b(0xbf)](),'currentPage':_0x3a715e===_0x560a9b(0xf5)?null:_0x56aa83,'totalPages':_0x3a715e===_0x560a9b(0xf5)?0x1:Math['ceil'](_0x44a9f5/_0xd9e900),'totalItems':_0x44a9f5}));_0x2046ce[_0x560a9b(0x153)]({'success':!![],'data':_0x1e19bb,'currentPage':_0x3a715e===_0x560a9b(0xf5)?null:_0x56aa83,'totalPages':_0x3a715e===_0x560a9b(0xf5)?0x1:Math['ceil'](_0x44a9f5/_0xd9e900),'totalItems':_0x44a9f5,'message':_0x560a9b(0xf1)});}catch(_0x109d7c){console['error'](_0x560a9b(0x14f),_0x109d7c),_0x2046ce[_0x560a9b(0xfc)](0x1f4)['json']({'success':![],'message':_0x560a9b(0x139),'error':_0x109d7c[_0x560a9b(0xc2)]});}},updateStudent=async(_0x1d99ff,_0x2d32bc)=>{const _0x31ba1b=a16_0x36dac7,{id:_0x388555}=_0x1d99ff['params'];let _0xa9ab64=null,_0x538861=null,_0x46b394=null;try{const {registration_number:_0x4249b7,student_name:_0x1b1987,father_name:_0x511995,mother_name:_0x13c0ca,date_of_birth:_0x20ed0f,gender:_0x318994,birth_place:_0xfc7bb5,nationality:_0x32799c,mother_tongue:_0x4ff1a1,blood_group:_0x3b4f42,religion:_0x3e8876,deposite_amount:_0xc33678,class_info:_0x4a6e3a,location_id:_0x366c0e,contact_number:_0x4c093d,descriptor:_0x5e7595,pro_pic:_0x49a4db}=_0x1d99ff[_0x31ba1b(0x159)],_0x41eceb=await studentModel[_0x31ba1b(0xd5)](_0x388555);if(!_0x41eceb)return _0x2d32bc[_0x31ba1b(0xfc)](0x194)[_0x31ba1b(0x153)]({'success':![],'message':_0x31ba1b(0xfd)});_0xa9ab64=_0x41eceb[_0x31ba1b(0xbf)]();const _0x2f6a66=await userModel['findById'](_0x41eceb[_0x31ba1b(0xd6)]);if(_0x2f6a66)_0x538861=_0x2f6a66[_0x31ba1b(0xbf)]();if(_0x318994&&![_0x31ba1b(0xd8),_0x31ba1b(0x15d),_0x31ba1b(0x106)][_0x31ba1b(0x12b)](_0x318994))return _0x2d32bc[_0x31ba1b(0xfc)](0x190)[_0x31ba1b(0x153)]({'success':![],'message':_0x31ba1b(0x154)});if(_0x4249b7&&_0x4249b7!==_0x41eceb[_0x31ba1b(0xca)]){const _0x51e6ad=await studentModel[_0x31ba1b(0x110)]({'registration_number':_0x4249b7,'_id':{'$ne':_0x388555}});if(_0x51e6ad)return _0x2d32bc[_0x31ba1b(0xfc)](0x190)[_0x31ba1b(0x153)]({'success':![],'message':'Registration\x20number\x20already\x20exists.'});}if(_0x5e7595){const _0x46948f=await userModel[_0x31ba1b(0x110)]({'descriptor':_0x5e7595,'_id':{'$ne':_0x41eceb[_0x31ba1b(0xd6)]}});if(_0x46948f)return _0x2d32bc[_0x31ba1b(0xfc)](0x190)[_0x31ba1b(0x153)]({'success':![],'message':_0x31ba1b(0x160)});}let _0x25be59=_0x41eceb[_0x31ba1b(0xef)];if(_0x4a6e3a){let _0x3833ee=await classModel['findOne']({'class_name':_0x4a6e3a[_0x31ba1b(0xff)],'section':_0x4a6e3a[_0x31ba1b(0x12e)],'academic_year':_0x4a6e3a['academic_year']});!_0x3833ee&&(_0x3833ee=await classModel[_0x31ba1b(0x122)](_0x4a6e3a)),_0x25be59=_0x3833ee[_0x31ba1b(0x128)];}if(_0x366c0e){const _0x29842c=await studentLocation[_0x31ba1b(0xd5)](_0x366c0e);if(!_0x29842c)return _0x2d32bc[_0x31ba1b(0xfc)](0x190)[_0x31ba1b(0x153)]({'success':![],'message':'Invalid\x20location_id'});}let _0x124bef=_0x41eceb[_0x31ba1b(0xf9)];if(_0x49a4db){const _0x46e6e7=await fileUploadModel['findById'](_0x49a4db);if(!_0x46e6e7)return _0x2d32bc[_0x31ba1b(0xfc)](0x190)[_0x31ba1b(0x153)]({'success':![],'message':_0x31ba1b(0xbd)});_0x124bef=_0x49a4db,_0x46b394=_0x46e6e7;}const _0x2afeea={..._0x4249b7&&{'registration_number':_0x4249b7},..._0x1b1987&&{'student_name':_0x1b1987},..._0x511995&&{'father_name':_0x511995},..._0x13c0ca&&{'mother_name':_0x13c0ca},..._0x20ed0f&&{'date_of_birth':_0x20ed0f},..._0x318994&&{'gender':_0x318994},..._0xfc7bb5&&{'birth_place':_0xfc7bb5},..._0x32799c&&{'nationality':_0x32799c},..._0x4ff1a1&&{'mother_tongue':_0x4ff1a1},..._0x3b4f42&&{'blood_group':_0x3b4f42},..._0x3e8876&&{'religion':_0x3e8876},..._0x1d99ff[_0x31ba1b(0x159)]['deposite_amount']!==undefined&&{'deposite_amount':_0x41eceb[_0x31ba1b(0x134)]+Number(_0x1d99ff[_0x31ba1b(0x159)][_0x31ba1b(0x134)])},..._0x25be59&&{'class_info':_0x25be59},..._0x366c0e&&{'location_id':_0x366c0e},..._0x4c093d&&{'contact_number':_0x4c093d},..._0x124bef&&{'pro_pic':_0x124bef}},_0x571225=await studentModel[_0x31ba1b(0xed)](_0x388555,_0x2afeea,{'new':!![]}),_0x2e7998={..._0x4249b7&&{'username':_0x4249b7},..._0x1b1987&&{'fullname':_0x1b1987},..._0x366c0e&&{'location_id':_0x366c0e},..._0x5e7595!==undefined&&{'descriptor':_0x5e7595||null}},_0x3b66cd=await userModel[_0x31ba1b(0xed)](_0x41eceb[_0x31ba1b(0xd6)],_0x2e7998,{'new':!![]});if(_0xc33678!==undefined&&_0xc33678!==_0x41eceb[_0x31ba1b(0x134)]){const _0x4f8db1=_0xc33678-(_0x41eceb[_0x31ba1b(0x134)]||0x0);_0x4f8db1!==0x0&&await financialModel[_0x31ba1b(0x122)]({'student_id':_0x41eceb['_id'][_0x31ba1b(0x125)](),'custodyType':'Student','transaction':_0x4f8db1>0x0?_0x31ba1b(0x113):_0x31ba1b(0x115),'depositAmount':Math[_0x31ba1b(0xe0)](_0xc33678),'depositName':_0x41eceb[_0x31ba1b(0xd4)],'type':_0x31ba1b(0x163),'status':_0x31ba1b(0xe4)});}return await logAudit({'userId':_0x1d99ff[_0x31ba1b(0xbc)]['id'],'username':_0x1d99ff[_0x31ba1b(0xbc)]['username'],'action':'UPDATE','targetModel':_0x31ba1b(0x169),'targetId':_0x571225[_0x31ba1b(0x128)],'description':_0x31ba1b(0x152)+(_0x4249b7||_0x41eceb[_0x31ba1b(0xca)])+_0x31ba1b(0x120),'changes':{'student':_0x571225[_0x31ba1b(0xbf)](),'user':_0x3b66cd[_0x31ba1b(0xbf)]()}}),_0x2d32bc[_0x31ba1b(0xfc)](0xc8)[_0x31ba1b(0x153)]({'success':!![],'message':_0x31ba1b(0xf4),'student':_0x571225,'user':_0x3b66cd});}catch(_0x51529c){console[_0x31ba1b(0x131)]('❌\x20Error\x20updating\x20student:',_0x51529c);try{if(_0xa9ab64)await studentModel['findByIdAndUpdate'](_0x388555,_0xa9ab64);if(_0x538861)await userModel['findByIdAndUpdate'](_0x538861['_id'],_0x538861);if(_0x46b394){const _0x23c864=path[_0x31ba1b(0x14e)](__dirname,'..',_0x46b394[_0x31ba1b(0x11f)]);if(fs[_0x31ba1b(0xde)](_0x23c864))fs[_0x31ba1b(0xc4)](_0x23c864);await fileUploadModel['findByIdAndDelete'](_0x46b394[_0x31ba1b(0x128)]);}}catch(_0xa1ceaf){console[_0x31ba1b(0x131)](_0x31ba1b(0x155),_0xa1ceaf);}return _0x2d32bc[_0x31ba1b(0xfc)](0x1f4)[_0x31ba1b(0x153)]({'success':![],'message':_0x31ba1b(0x140),'error':_0x51529c['message']});}},deleteStudent=async(_0x1c947a,_0x54ae19)=>{const _0x2a4fc1=a16_0x36dac7,{id:_0x23d0e9}=_0x1c947a[_0x2a4fc1(0x13f)];let _0x2aac36=null,_0x4c2a0a=null,_0x3d650c=null;try{_0x2aac36=await studentModel[_0x2a4fc1(0xd5)](_0x23d0e9);if(!_0x2aac36)return _0x54ae19[_0x2a4fc1(0xfc)](0x194)['json']({'success':![],'message':_0x2a4fc1(0xfd)});_0x4c2a0a=await userModel[_0x2a4fc1(0xd5)](_0x2aac36[_0x2a4fc1(0xd6)]);if(_0x2aac36['pro_pic']){_0x3d650c=await fileUploadModel[_0x2a4fc1(0xd5)](_0x2aac36[_0x2a4fc1(0xf9)]);if(_0x3d650c){const _0x4c05d0=path[_0x2a4fc1(0x14e)](__dirname,'..',_0x3d650c[_0x2a4fc1(0x11f)]);fs[_0x2a4fc1(0xde)](_0x4c05d0)&&fs['unlinkSync'](_0x4c05d0),await fileUploadModel[_0x2a4fc1(0xcd)](_0x3d650c[_0x2a4fc1(0x128)]);}}return await studentModel[_0x2a4fc1(0xcd)](_0x23d0e9),_0x4c2a0a&&await userModel[_0x2a4fc1(0xcd)](_0x4c2a0a[_0x2a4fc1(0x128)]),await logAudit({'userId':_0x1c947a[_0x2a4fc1(0xbc)]['id'],'username':_0x1c947a['user']['username'],'action':_0x2a4fc1(0xeb),'targetModel':'Student','targetId':_0x23d0e9,'description':_0x2a4fc1(0x102)+_0x2aac36[_0x2a4fc1(0xca)]+_0x2a4fc1(0x117),'changes':{'student':_0x2aac36,'user':_0x4c2a0a,'pro_pic':_0x3d650c}}),_0x54ae19[_0x2a4fc1(0xfc)](0xc8)[_0x2a4fc1(0x153)]({'success':!![],'message':_0x2a4fc1(0xd9)});}catch(_0x4d3e32){return console['error'](_0x2a4fc1(0x107),_0x4d3e32),_0x54ae19['status'](0x1f4)[_0x2a4fc1(0x153)]({'success':![],'message':'Internal\x20server\x20error','error':_0x4d3e32[_0x2a4fc1(0xc2)]});}},getStudentById=async(_0x243660,_0x38a472)=>{const _0xefd484=a16_0x36dac7;try{const {id:_0x4a5977}=_0x243660['params'];if(!_0x4a5977)return _0x38a472['status'](0x190)[_0xefd484(0x153)]({'success':![],'message':_0xefd484(0x156)});const _0x320d43=await studentModel[_0xefd484(0xd5)](_0x4a5977)[_0xefd484(0xe3)](_0xefd484(0x119),'locationName')[_0xefd484(0xe3)](_0xefd484(0xef),_0xefd484(0x150))[_0xefd484(0xe3)](_0xefd484(0xf9),_0xefd484(0x147));if(!_0x320d43)return _0x38a472[_0xefd484(0xfc)](0x194)[_0xefd484(0x153)]({'success':![],'message':_0xefd484(0x114)});_0x38a472[_0xefd484(0xfc)](0xc8)[_0xefd484(0x153)]({'success':!![],'data':_0x320d43,'message':_0xefd484(0x101)});}catch(_0x2ce13b){console[_0xefd484(0x131)](_0xefd484(0x132),_0x2ce13b),_0x38a472[_0xefd484(0xfc)](0x1f4)[_0xefd484(0x153)]({'success':![],'message':_0xefd484(0x139),'error':_0x2ce13b[_0xefd484(0xc2)]});}},getStudentByIdProfile=async(_0x575008,_0x44f36f)=>{const _0xdde29e=a16_0x36dac7;try{const {id:_0x224c43}=_0x575008[_0xdde29e(0x13f)];if(!_0x224c43)return _0x44f36f['status'](0x190)[_0xdde29e(0x153)]({'success':![],'message':'Student\x20ID\x20is\x20missing'});const _0x20094b=await studentModel[_0xdde29e(0xd5)](_0x224c43)[_0xdde29e(0xe3)](_0xdde29e(0x119),'locationName')[_0xdde29e(0xe3)](_0xdde29e(0xef),_0xdde29e(0x150))['populate']('pro_pic',_0xdde29e(0x147));if(!_0x20094b)return _0x44f36f['status'](0x194)[_0xdde29e(0x153)]({'success':![],'message':'No\x20student\x20data\x20found'});_0x44f36f['status'](0xc8)[_0xdde29e(0x153)]({'success':!![],'data':_0x20094b,'message':_0xdde29e(0x101)});}catch(_0x1c8b75){console[_0xdde29e(0x131)](_0xdde29e(0x132),_0x1c8b75),_0x44f36f[_0xdde29e(0xfc)](0x1f4)[_0xdde29e(0x153)]({'success':![],'message':'Internal\x20server\x20error','error':_0x1c8b75['message']});}},getStudentByData=async(_0x11457f,_0x1248eb)=>{const _0x35d3ba=a16_0x36dac7;try{const {id:_0x303247}=_0x11457f[_0x35d3ba(0xbc)];if(!_0x303247)return _0x1248eb[_0x35d3ba(0xfc)](0x190)['json']({'success':![],'message':'Student\x20ID\x20is\x20missing'});const _0x4c3bfa=await studentModel[_0x35d3ba(0x110)]({'registration_number':_0x11457f['params']['regNo']})[_0x35d3ba(0xe3)](_0x35d3ba(0x119),_0x35d3ba(0x105))[_0x35d3ba(0xe3)](_0x35d3ba(0xef),'class_name\x20section\x20academic_year')[_0x35d3ba(0xe3)](_0x35d3ba(0xf9),_0x35d3ba(0x147));if(!_0x4c3bfa)return _0x1248eb['status'](0x194)[_0x35d3ba(0x153)]({'success':![],'message':_0x35d3ba(0x114)});_0x1248eb[_0x35d3ba(0xfc)](0xc8)['json']({'success':!![],'data':_0x4c3bfa,'message':_0x35d3ba(0x101)});}catch(_0x151496){console[_0x35d3ba(0x131)](_0x35d3ba(0x132),_0x151496),_0x1248eb[_0x35d3ba(0xfc)](0x1f4)[_0x35d3ba(0x153)]({'success':![],'message':_0x35d3ba(0x139),'error':_0x151496[_0x35d3ba(0xc2)]});}},deleteInmate=async(_0xb9eb91,_0x1b7771)=>{const _0x2b395d=a16_0x36dac7;try{const {id:_0x37fc30}=_0xb9eb91['params'];if(!_0x37fc30)return _0x1b7771[_0x2b395d(0xfc)](0x190)[_0x2b395d(0x153)]({'message':_0x2b395d(0x10d)});if(!mongoose[_0x2b395d(0x146)][_0x2b395d(0x14b)][_0x2b395d(0xea)](_0x37fc30))return _0x1b7771[_0x2b395d(0xfc)](0x190)[_0x2b395d(0x153)]({'message':'Invalid\x20ID\x20format'});const _0x2fb000=await InmateSchema[_0x2b395d(0xcd)](_0x37fc30);if(!_0x2fb000)return _0x1b7771[_0x2b395d(0xfc)](0x194)[_0x2b395d(0x153)]({'message':'No\x20data\x20found'});const _0x397583=await userModel['deleteOne']({'inmateId':_0x2fb000[_0x2b395d(0x136)]});await logAudit({'userId':_0xb9eb91[_0x2b395d(0xbc)]['id'],'username':_0xb9eb91['user']['username'],'action':_0x2b395d(0xeb),'targetModel':_0x2b395d(0xf3),'targetId':_0x2fb000[_0x2b395d(0x128)],'description':'Deleted\x20inmate\x20'+_0x2fb000[_0x2b395d(0x136)],'changes':_0x2fb000[_0x2b395d(0xbf)]()}),_0x1b7771['status'](0xc8)[_0x2b395d(0x153)]({'success':!![],'message':_0x2b395d(0x103)});}catch(_0x5fc6b3){_0x1b7771[_0x2b395d(0xfc)](0x1f4)[_0x2b395d(0x153)]({'success':![],'message':_0x2b395d(0x139),'error':_0x5fc6b3[_0x2b395d(0xc2)]});}},searchInmates=async(_0x390111,_0x7ddfb)=>{const _0x2c9a81=a16_0x36dac7;try{const {query:_0x20bc6b}=_0x390111[_0x2c9a81(0x11c)];if(!_0x20bc6b||_0x20bc6b[_0x2c9a81(0x15a)]()==='')return _0x7ddfb['status'](0x190)[_0x2c9a81(0x153)]({'message':_0x2c9a81(0xdc)});const _0x5af58f=new RegExp(_0x20bc6b,'i'),_0x2293a4={'$or':[{'inmateId':_0x5af58f},{'firstName':_0x5af58f},{'lastName':_0x5af58f},{'cellNumber':_0x5af58f}]},_0x122711=await InmateSchema[_0x2c9a81(0x13b)](_0x2293a4),_0x3665db=await InmateSchema['countDocuments'](_0x2293a4),_0x150ba1=await InmateSchema[_0x2c9a81(0x124)]();_0x7ddfb[_0x2c9a81(0xfc)](0xc8)[_0x2c9a81(0x153)]({'success':!![],'data':_0x122711,'totalPages':_0x3665db,'totalItems':_0x122711[_0x2c9a81(0x15f)]});}catch(_0x3bc7f7){_0x7ddfb[_0x2c9a81(0xfc)](0x1f4)[_0x2c9a81(0x153)]({'success':![],'message':'Internal\x20server\x20error','error':_0x3bc7f7[_0x2c9a81(0xc2)]});}},getInmateUsingInmateID=async(_0x363bb3,_0x4f4380)=>{const _0x3d45dc=a16_0x36dac7;try{const {id:_0x104ae2}=_0x363bb3[_0x3d45dc(0x13f)];if(!_0x104ae2)return _0x4f4380[_0x3d45dc(0xfc)](0x190)[_0x3d45dc(0x153)]({'message':_0x3d45dc(0x10d)});const _0x317569=await InmateSchema[_0x3d45dc(0x13b)]({'inmateId':_0x104ae2});if(!_0x317569)return _0x4f4380[_0x3d45dc(0xfc)](0x194)['json']({'message':_0x3d45dc(0xbe)});_0x4f4380[_0x3d45dc(0xfc)](0xc8)[_0x3d45dc(0x153)]({'success':!![],'data':_0x317569,'message':_0x3d45dc(0x112)});}catch(_0x125edb){_0x4f4380[_0x3d45dc(0xfc)](0x1f4)[_0x3d45dc(0x153)]({'success':![],'message':_0x3d45dc(0x139),'error':_0x125edb[_0x3d45dc(0xc2)]});}},getInmateTransactionData=async(_0x4ca7fc,_0x1e62f7)=>{const _0x36dc0a=a16_0x36dac7;try{const {id:_0x35d16b}=_0x4ca7fc[_0x36dc0a(0x13f)],{page:page=0x1,limit:limit=0xa,days:_0x16d28b}=_0x4ca7fc[_0x36dc0a(0x11c)];if(!_0x35d16b)return _0x1e62f7[_0x36dc0a(0xfc)](0x190)[_0x36dc0a(0x153)]({'message':_0x36dc0a(0x10d)});let _0x8bcf6={'inmateId':_0x35d16b};if(_0x16d28b){const _0x290e68=new Date();_0x290e68[_0x36dc0a(0x12d)](_0x290e68[_0x36dc0a(0xe8)]()-parseInt(_0x16d28b,0xa)),_0x8bcf6[_0x36dc0a(0x108)]={'$gte':_0x290e68};}const _0x2e8fb3=(parseInt(page)-0x1)*parseInt(limit),_0x302246=parseInt(limit),[_0x2ff9ad,_0x54df21]=await Promise[_0x36dc0a(0x11b)]([POSShoppingCart[_0x36dc0a(0x13b)](_0x8bcf6)[_0x36dc0a(0xe3)](_0x36dc0a(0xf2))[_0x36dc0a(0x111)](),financialModel[_0x36dc0a(0x13b)](_0x8bcf6)[_0x36dc0a(0xe3)](_0x36dc0a(0x151))[_0x36dc0a(0x111)]()]);let _0x928b07=[..._0x2ff9ad[_0x36dc0a(0x167)](_0x22f7ae=>({..._0x22f7ae,'source':_0x36dc0a(0x13e)})),..._0x54df21[_0x36dc0a(0x167)](_0x35f3b7=>({..._0x35f3b7,'source':_0x36dc0a(0xc1)}))];_0x928b07[_0x36dc0a(0xc7)]((_0x307cde,_0xb3c2e2)=>new Date(_0xb3c2e2[_0x36dc0a(0x108)])-new Date(_0x307cde[_0x36dc0a(0x108)]));let _0x280bbe=_0x928b07[_0x36dc0a(0x109)](_0x2e8fb3,_0x2e8fb3+_0x302246);_0x280bbe=await Promise[_0x36dc0a(0x11b)](_0x280bbe['map'](async _0x305385=>{const _0x309de1=_0x36dc0a;if(_0x305385[_0x309de1(0xbb)]==='POS'){const _0x543eca=await InmateSchema['findOne']({'inmateId':_0x305385[_0x309de1(0x136)]},{'custodyType':0x1,'_id':0x0})['lean']();_0x543eca&&(_0x305385[_0x309de1(0xfb)]=_0x543eca[_0x309de1(0xfb)]);}return _0x305385;}));if(!_0x928b07[_0x36dc0a(0x15f)])return _0x1e62f7[_0x36dc0a(0xfc)](0x194)[_0x36dc0a(0xd7)]({'success':![],'message':'No\x20data\x20found'});_0x1e62f7[_0x36dc0a(0xfc)](0xc8)[_0x36dc0a(0x153)]({'success':!![],'count':_0x928b07[_0x36dc0a(0x15f)],'page':parseInt(page),'limit':_0x302246,'totalPages':Math[_0x36dc0a(0xc0)](_0x928b07[_0x36dc0a(0x15f)]/_0x302246),'transactions':_0x280bbe,'message':_0x36dc0a(0xe6)});}catch(_0xdbed7d){_0x1e62f7[_0x36dc0a(0xfc)](0x1f4)[_0x36dc0a(0x153)]({'success':![],'message':'Internal\x20server\x20error','error':_0xdbed7d['message']});}},getStudentTransactionData=async(_0x18136b,_0x223130)=>{const _0x3d5624=a16_0x36dac7;try{const {id:_0x29cffc}=_0x18136b['params'],{page:page=0x1,limit:limit=0xa,days:_0x472ca0,sortBy:sortBy=_0x3d5624(0x108),sortOrder:sortOrder=_0x3d5624(0xd1),search:search=''}=_0x18136b[_0x3d5624(0x11c)];if(!_0x29cffc)return _0x223130[_0x3d5624(0xfc)](0x190)[_0x3d5624(0x153)]({'message':_0x3d5624(0x15e)});const _0x17edfe=await studentModel[_0x3d5624(0x110)]({'registration_number':_0x29cffc});if(!_0x17edfe)return _0x223130[_0x3d5624(0xfc)](0x194)[_0x3d5624(0x153)]({'message':_0x3d5624(0xfd)});const _0x51b2f8=_0x17edfe[_0x3d5624(0x128)];let _0x5c868b={'student_id':_0x51b2f8};if(_0x472ca0){const _0x1174de=new Date();_0x1174de['setDate'](_0x1174de[_0x3d5624(0xe8)]()-parseInt(_0x472ca0,0xa)),_0x5c868b['createdAt']={'$gte':_0x1174de};}search[_0x3d5624(0x15a)]()&&(_0x5c868b[_0x3d5624(0x10e)]=[{'depositedBy':{'$regex':search,'$options':'i'}},{'contactNumber':{'$regex':search,'$options':'i'}},{'transaction':{'$regex':search,'$options':'i'}}]);const _0xa3b9f7=parseInt(page),_0x1ac3f8=parseInt(limit),_0x55a3ea=(_0xa3b9f7-0x1)*_0x1ac3f8,[_0x43706f,_0xfbde93]=await Promise[_0x3d5624(0x11b)]([financialModel[_0x3d5624(0x13b)](_0x5c868b)[_0x3d5624(0xe3)](_0x3d5624(0x141))[_0x3d5624(0xc7)]({[sortBy]:sortOrder===_0x3d5624(0x13d)?0x1:-0x1})[_0x3d5624(0x111)](),POSShoppingCart[_0x3d5624(0x13b)]({'student_id':_0x51b2f8})[_0x3d5624(0xe3)](_0x3d5624(0xf2))[_0x3d5624(0xc7)]({[sortBy]:sortOrder==='asc'?0x1:-0x1})[_0x3d5624(0x111)]()]);let _0x2fdb4d=[..._0x43706f[_0x3d5624(0x167)](_0x663a6=>({..._0x663a6,'source':'FINANCIAL'})),..._0xfbde93[_0x3d5624(0x167)](_0x3741fc=>({..._0x3741fc,'source':_0x3d5624(0x13e)}))];_0x2fdb4d[_0x3d5624(0xc7)]((_0x175809,_0x426df4)=>{const _0x4a1e7b=_0x3d5624,_0x8ea258=new Date(_0x175809[sortBy]),_0x59b9af=new Date(_0x426df4[sortBy]);return sortOrder===_0x4a1e7b(0x13d)?_0x8ea258-_0x59b9af:_0x59b9af-_0x8ea258;});const _0x36c9c3=_0x2fdb4d['length'],_0x20f2de=_0x2fdb4d[_0x3d5624(0x109)](_0x55a3ea,_0x55a3ea+_0x1ac3f8),_0x1af993=_0x20f2de[_0x3d5624(0x167)](_0x58e7bf=>({..._0x58e7bf,'createdAtFormatted':moment(_0x58e7bf['createdAt'])['format'](_0x3d5624(0xdf))}));_0x223130[_0x3d5624(0xfc)](0xc8)[_0x3d5624(0x153)]({'success':!![],'student':{'id':_0x17edfe['_id'],'registration_number':_0x17edfe[_0x3d5624(0xca)],'name':_0x17edfe[_0x3d5624(0xd4)]},'total':_0x36c9c3,'page':_0xa3b9f7,'limit':_0x1ac3f8,'totalPages':Math[_0x3d5624(0xc0)](_0x36c9c3/_0x1ac3f8),'transactions':_0x1af993});}catch(_0x192e17){_0x223130[_0x3d5624(0xfc)](0x1f4)[_0x3d5624(0x153)]({'success':![],'message':'Failed\x20to\x20fetch\x20student\x20transactions','error':_0x192e17[_0x3d5624(0xc2)]});}},fetchInmateDataUsingFace=async(_0x6c76f4,_0x54728a)=>{const _0x3933de=a16_0x36dac7;try{const {descriptor:_0x2472cc}=_0x6c76f4[_0x3933de(0x159)];if(!_0x2472cc)return _0x54728a[_0x3933de(0xfc)](0x194)[_0x3933de(0xd7)]({'success':![],'message':_0x3933de(0x129)});const _0x30ed28=await userModel[_0x3933de(0x13b)]({},{'descriptor':0x1,'username':0x1,'role':0x1,'fullname':0x1});function _0x579fb0(_0x55b9fb,_0x4824cc){const _0x3804aa=_0x3933de;let _0x38a622=0x0;for(let _0x309a09=0x0;_0x309a09<_0x55b9fb[_0x3804aa(0x15f)];_0x309a09++){let _0x2afdd3=_0x55b9fb[_0x309a09]-_0x4824cc[_0x309a09];_0x38a622+=_0x2afdd3*_0x2afdd3;}return Math[_0x3804aa(0x118)](_0x38a622);}let _0x9df183=null,_0x1db02b=Infinity;for(const _0x25cae2 of _0x30ed28){if(!_0x25cae2[_0x3933de(0xdd)]||_0x25cae2['descriptor'][_0x3933de(0x15f)]!==_0x2472cc['length'])continue;const _0x26085f=_0x579fb0(_0x25cae2[_0x3933de(0xdd)],_0x2472cc);_0x26085f<_0x1db02b&&(_0x1db02b=_0x26085f,_0x9df183=_0x25cae2);}const _0x10f7ca=0.4;if(!_0x9df183||_0x1db02b>_0x10f7ca)return _0x54728a['status'](0x190)[_0x3933de(0x153)]({'message':_0x3933de(0xfa)});const _0x1c59b3=await Inmate[_0x3933de(0x110)]({'user_id':_0x9df183[_0x3933de(0x128)]});return _0x54728a[_0x3933de(0xfc)](0xc8)[_0x3933de(0xd7)]({'success':!![],'data':_0x1c59b3,'message':_0x3933de(0xf8)});}catch(_0x45007a){return _0x54728a[_0x3933de(0xfc)](0x1f4)['send']({'success':![],'message':_0x3933de(0x12f),'error':_0x45007a[_0x3933de(0xc2)]});}};module[a16_0x36dac7(0x162)]={'createStudent':createStudent,'getStudents':getStudents,'deleteStudent':deleteStudent,'getStudentById':getStudentById,'downloadStudentsCSV':downloadStudentsCSV,'updateStudent':updateStudent,'deleteInmate':deleteInmate,'searchInmates':searchInmates,'downloadInmatesCSV':downloadInmatesCSV,'getInmateUsingInmateID':getInmateUsingInmateID,'getInmateTransactionData':getInmateTransactionData,'fetchInmateDataUsingFace':fetchInmateDataUsingFace,'getStudentByData':getStudentByData,'getStudentTransactionData':getStudentTransactionData,'getStudentByIdProfile':getStudentByIdProfile};function a16_0x589c(){const _0x50108c=['json','Invalid\x20gender\x20value.','⚠️\x20Rollback\x20failed:','Student\x20ID\x20is\x20missing','student','../model/fileUploadModel','body','trim','moment','end','Female','Student\x20registration\x20number\x20is\x20required','length','Descriptor\x20already\x20exists\x20in\x20other\x20users.','Invalid\x20location_id','exports','CASH','cellNumber','../model/userModel','No\x20students\x20found','map','Content-Disposition','Student','source','user','Invalid\x20pro_pic\x20file\x20ID','No\x20data\x20found','toObject','ceil','FINANCIAL','message','$expr','unlinkSync','2287956VQxnkj','Content-Type','sort','../model/financialModel','50295slzwBz','registration_number','gender','../model/posShoppingCart','findByIdAndDelete','crimeType','10KtAnge','5FwsKRt','desc','lastName','../utils/dateFormat','student_name','findById','user_id','send','Male','Student,\x20user,\x20and\x20profile\x20picture\x20deleted\x20successfully','attachment;\x20filename=\x22students.csv\x22','nationality','Search\x20query\x20is\x20required','descriptor','existsSync','YYYY-MM-DD\x20HH:mm:ss','abs','Descriptor\x20already\x20exists\x20in\x20users.','Created\x20student\x20','populate','COMPLETED','Missing\x20required\x20fields:\x20','Fetched\x20inmate\x20transactions','320128uLMDnk','getDate','72Oqecox','isValid','DELETE','blood_group','findByIdAndUpdate','academic_year','class_info','mongoose','Students\x20fetched\x20successfully','products.productId','Inmate','Student\x20and\x20user\x20updated\x20successfully','true','attachment;\x20filename=\x22inmates.csv\x22','dateOfBirth','data\x20fetch\x20successfully','pro_pic','Face\x20not\x20recognized','custodyType','status','Student\x20not\x20found','bcrypt','class_name','firstName','Student\x20fetched\x20successfully','Deleted\x20student\x20','Inmate\x20successfully\x20deleted','attachment;\x20filename=inmates.csv','locationName','Other','❌\x20Error\x20deleting\x20student:','createdAt','slice','admissionDate','5809203skFYkf','setHeader','ID\x20is\x20missing','$or','skip','findOne','lean','Inmate\x20successfully\x20fetched','DEPOSIT','No\x20student\x20data\x20found','WITHDRAW','4790440iaCwJl','\x20and\x20associated\x20user\x20account','sqrt','location_id','mother_tongue','all','query','json2csv','Failed\x20to\x20export\x20CSV','file_url','\x20and\x20corresponding\x20user\x20account','birth_place','create','contact_number','estimatedDocumentCount','toString','Registration\x20number\x20already\x20exists.','../model/studentLocationModel','_id','could\x20not\x20find\x20face','religion','includes','countDocuments','setDate','section','internal\x20server\x20down','30939172pkayTp','error','getStudentById\x20error:','../model/studentModel','deposite_amount','parse','inmateId','1897OPTfgw','Student\x20and\x20user\x20created\x20successfully','Internal\x20server\x20error','26512lVqTCQ','find','../model/classModel','asc','POS','params','Internal\x20server\x20error\x20-\x20changes\x20reverted','student_id','mother_name','balance','push','limit','Types','file_name\x20file_url\x20uploaded_by','father_name','❌\x20CSV\x20export\x20error:','date_of_birth','ObjectId','$registration_number','text/csv','join','getStudents\x20error:','class_name\x20section\x20academic_year','workAssignId','Updated\x20student\x20'];a16_0x589c=function(){return _0x50108c;};return a16_0x589c();}