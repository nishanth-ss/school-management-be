const a8_0x4ef3df=a8_0x4e47;(function(_0x3187b6,_0x3ccaa2){const _0x710e64=a8_0x4e47,_0x189150=_0x3187b6();while(!![]){try{const _0x38a3fe=parseInt(_0x710e64(0x173))/0x1*(-parseInt(_0x710e64(0x170))/0x2)+parseInt(_0x710e64(0x16a))/0x3*(parseInt(_0x710e64(0x179))/0x4)+parseInt(_0x710e64(0x15b))/0x5*(parseInt(_0x710e64(0x17b))/0x6)+-parseInt(_0x710e64(0x166))/0x7*(-parseInt(_0x710e64(0x14e))/0x8)+parseInt(_0x710e64(0x16d))/0x9*(-parseInt(_0x710e64(0x176))/0xa)+parseInt(_0x710e64(0x155))/0xb+-parseInt(_0x710e64(0x161))/0xc;if(_0x38a3fe===_0x3ccaa2)break;else _0x189150['push'](_0x189150['shift']());}catch(_0x2d0251){_0x189150['push'](_0x189150['shift']());}}}(a8_0x1788,0x28718));function a8_0x4e47(_0x1f6ac0,_0x267c78){_0x1f6ac0=_0x1f6ac0-0x14c;const _0x178850=a8_0x1788();let _0x4e47ee=_0x178850[_0x1f6ac0];return _0x4e47ee;}function a8_0x1788(){const _0x3df638=['8SfBvko','Updated\x20Department\x20','Invalid\x20ID\x20format','5260nwxYhw','params','Department\x20fetched\x20successfully','4DJsOdV','../utils/auditlogger','6NuwiXq','_id','findByIdAndDelete','isActive','Department\x20already\x20exists','Types','1598024vNyvts','length','Deleted\x20Department:\x20','findById','name','ID\x20is\x20missing','findOne','1816496kofhKM','Internal\x20server\x20error','ObjectId','All\x20Department\x20fetched\x20successfully','sort','Department','879565cpljEg','message','username','UPDATE','Department\x20created\x20successfully','save','3262380RXaYzm','No\x20data\x20found','find','status','trim','7GOBMYc','user','../model/departmentModel','body','323295cpQehu','json','isValid','1197APpoAL','Department\x20deleted\x20successfully','Created\x20department:\x20','35272HpMeTJ','DELETE','Department\x20not\x20found'];a8_0x1788=function(){return _0x3df638;};return a8_0x1788();}const Department=require(a8_0x4ef3df(0x168)),logAudit=require(a8_0x4ef3df(0x17a)),mongoose=require('mongoose'),createDepartment=async(_0x5ca7a5,_0x1fdac4)=>{const _0x30bc83=a8_0x4ef3df,{name:_0x4fc025,isActive:isActive=!![]}=_0x5ca7a5[_0x30bc83(0x169)];try{const _0x10ba07=await Department[_0x30bc83(0x154)]({'name':_0x4fc025['trim']()});if(_0x10ba07)return _0x1fdac4[_0x30bc83(0x164)](0x190)['json']({'success':![],'message':_0x30bc83(0x14c)});const _0x2223fe=new Department({'name':_0x4fc025[_0x30bc83(0x165)](),'isActive':isActive});await _0x2223fe[_0x30bc83(0x160)](),await logAudit({'userId':_0x5ca7a5['user']['id'],'username':_0x5ca7a5['user'][_0x30bc83(0x15d)],'action':'CREATE','targetModel':_0x30bc83(0x15a),'targetId':_0x2223fe[_0x30bc83(0x17c)],'description':_0x30bc83(0x16f)+_0x2223fe['name'],'changes':{'name':_0x2223fe[_0x30bc83(0x152)],'isActive':_0x2223fe['isActive']}}),_0x1fdac4['status'](0xc9)[_0x30bc83(0x16b)]({'success':!![],'message':_0x30bc83(0x15f),'data':_0x2223fe});}catch(_0x121f92){_0x1fdac4[_0x30bc83(0x164)](0x1f4)[_0x30bc83(0x16b)]({'success':![],'message':_0x30bc83(0x156),'error':_0x121f92['message']});}},getAllDepartment=async(_0x40d53f,_0x3bbee2)=>{const _0x48ad7f=a8_0x4ef3df;try{const _0x5638f2=await Department[_0x48ad7f(0x163)]()[_0x48ad7f(0x159)]({'createdAt':-0x1});return _0x3bbee2['status'](0xc8)['json']({'success':!![],'data':_0x5638f2,'totalItems':_0x5638f2[_0x48ad7f(0x14f)],'message':_0x48ad7f(0x158)});}catch(_0x2c1ed2){_0x3bbee2[_0x48ad7f(0x164)](0x1f4)['json']({'success':![],'message':_0x48ad7f(0x156),'error':_0x2c1ed2[_0x48ad7f(0x15c)]});}},getDepartmentById=async(_0x2e6832,_0x287503)=>{const _0x406e60=a8_0x4ef3df,{id:_0x4d6999}=_0x2e6832[_0x406e60(0x177)];try{const _0x579bf4=await Department[_0x406e60(0x151)](_0x4d6999);if(!_0x579bf4)return _0x287503[_0x406e60(0x164)](0x194)[_0x406e60(0x16b)]({'success':![],'message':'Department\x20not\x20found'});return _0x287503[_0x406e60(0x164)](0xc8)[_0x406e60(0x16b)]({'success':!![],'data':_0x579bf4,'message':_0x406e60(0x178)});}catch(_0x360747){_0x287503['status'](0x1f4)[_0x406e60(0x16b)]({'success':![],'message':'Internal\x20server\x20error','error':_0x360747[_0x406e60(0x15c)]});}},updateDepartment=async(_0x335d9b,_0x20dcef)=>{const _0x3fd7eb=a8_0x4ef3df,{id:_0x55f6d1}=_0x335d9b[_0x3fd7eb(0x177)],_0x6d4d47=_0x335d9b['body'];try{if(!_0x55f6d1)return _0x20dcef[_0x3fd7eb(0x164)](0x190)[_0x3fd7eb(0x16b)]({'message':_0x3fd7eb(0x153)});if(!mongoose[_0x3fd7eb(0x14d)][_0x3fd7eb(0x157)][_0x3fd7eb(0x16c)](_0x55f6d1))return _0x20dcef[_0x3fd7eb(0x164)](0x190)[_0x3fd7eb(0x16b)]({'message':'Invalid\x20ID\x20format'});const _0x2c6aaa=await Department['findByIdAndUpdate'](_0x55f6d1,_0x6d4d47,{'new':!![],'runValidators':!![]});if(!_0x2c6aaa)return _0x20dcef['status'](0x194)[_0x3fd7eb(0x16b)]({'message':_0x3fd7eb(0x162)});const _0xe63525={};return _0x6d4d47[_0x3fd7eb(0x152)]&&_0x6d4d47[_0x3fd7eb(0x152)]!==_0x2c6aaa[_0x3fd7eb(0x152)]&&(_0xe63525[_0x3fd7eb(0x152)]={'old':_0x2c6aaa[_0x3fd7eb(0x152)],'new':_0x6d4d47[_0x3fd7eb(0x152)]}),_0x6d4d47['isActive']!==undefined&&_0x6d4d47['isActive']!==_0x2c6aaa[_0x3fd7eb(0x17e)]&&(_0xe63525[_0x3fd7eb(0x17e)]={'old':_0x2c6aaa[_0x3fd7eb(0x17e)],'new':_0x6d4d47[_0x3fd7eb(0x17e)]}),await logAudit({'userId':_0x335d9b[_0x3fd7eb(0x167)]['id'],'username':_0x335d9b[_0x3fd7eb(0x167)]['username'],'action':_0x3fd7eb(0x15e),'targetModel':_0x3fd7eb(0x15a),'targetId':_0x2c6aaa[_0x3fd7eb(0x17c)],'description':_0x3fd7eb(0x174)+_0x2c6aaa[_0x3fd7eb(0x152)],'changes':_0xe63525}),_0x20dcef[_0x3fd7eb(0x164)](0xc8)[_0x3fd7eb(0x16b)]({'success':!![],'message':'Department\x20updated\x20successfully','data':_0x2c6aaa});}catch(_0x36c0cb){return _0x20dcef[_0x3fd7eb(0x164)](0x1f4)[_0x3fd7eb(0x16b)]({'success':![],'message':_0x3fd7eb(0x156),'error':_0x36c0cb[_0x3fd7eb(0x15c)]});}},deleteDepartment=async(_0x1572af,_0x148732)=>{const _0x3a8415=a8_0x4ef3df,{id:_0x45d8d0}=_0x1572af[_0x3a8415(0x177)];try{if(!_0x45d8d0)return _0x148732[_0x3a8415(0x164)](0x190)[_0x3a8415(0x16b)]({'message':_0x3a8415(0x153)});if(!mongoose['Types']['ObjectId'][_0x3a8415(0x16c)](_0x45d8d0))return _0x148732[_0x3a8415(0x164)](0x190)['json']({'message':_0x3a8415(0x175)});const _0x189ccf=await Department[_0x3a8415(0x151)](_0x45d8d0);if(!_0x189ccf)return _0x148732[_0x3a8415(0x164)](0x194)['json']({'message':_0x3a8415(0x172)});return await Department[_0x3a8415(0x17d)](_0x45d8d0),await logAudit({'userId':_0x1572af[_0x3a8415(0x167)]['id'],'username':_0x1572af[_0x3a8415(0x167)][_0x3a8415(0x15d)],'action':_0x3a8415(0x171),'targetModel':_0x3a8415(0x15a),'targetId':_0x189ccf[_0x3a8415(0x17c)],'description':_0x3a8415(0x150)+_0x189ccf[_0x3a8415(0x152)],'changes':{'name':_0x189ccf[_0x3a8415(0x152)],'isActive':_0x189ccf[_0x3a8415(0x17e)]}}),_0x148732['status'](0xc8)[_0x3a8415(0x16b)]({'success':!![],'message':_0x3a8415(0x16e)});}catch(_0x2cc3b4){return _0x148732['status'](0x1f4)['json']({'success':![],'message':'Internal\x20server\x20error','error':_0x2cc3b4['message']});}};module['exports']={'createDepartment':createDepartment,'getAllDepartment':getAllDepartment,'getDepartmentById':getDepartmentById,'updateDepartment':updateDepartment,'deleteDepartment':deleteDepartment};